<%- pages.filter(page => page.type === 'form').map(page => {
  const entityName = page.entity || 'Item';
  const endpoint = page.entity ? page.entity.toLowerCase() + 's' : 'items';
  
  return `import React from 'react';
import { useForm } from 'react-hook-form';
import { useMutation, useQueryClient } from 'react-query';
import api from '../api';
import { Button } from "@/components/ui/button"
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"

const create<%= pages[0].entity.name %> = async (data: any) => {
  const { data: response } = await api.post('/<%= pages[0].entity.name.toLowerCase() %>', data);
  return response;
};

export default function <%= pages[0].name %>Form() {
  const queryClient = useQueryClient();
  const { register, handleSubmit, formState: { errors } } = useForm();
  const mutation = useMutation(create<%= pages[0].entity.name %>, {
    onSuccess: () => {
      queryClient.invalidateQueries('<%= pages[0].entity.name.toLowerCase() %>s');
    },
  });

  const onSubmit = (data: any) => {
    mutation.mutate(data);
  };

  return (
    <Card className="w-[350px]">
      <CardHeader>
        <CardTitle>Create <%= pages[0].entity.name %></CardTitle>
        <CardDescription>Create a new <%= pages[0].entity.name.toLowerCase() %>.</CardDescription>
      </CardHeader>
      <CardContent>
        <form onSubmit={handleSubmit(onSubmit)}>
          <div className="grid w-full items-center gap-4">
            <% for (const field of pages[0].entity.fields) { %>
              <% if (field.name !== 'id') { %>
            <div className="flex flex-col space-y-1.5">
              <Label htmlFor="<%= field.name %>"><%= field.name %></Label>
              <Input id="<%= field.name %>" {...register("<%= field.name %>", { required: true })} />
              {errors.<%= field.name %> && <span>This field is required</span>}
            </div>
              <% } %>
            <% } %>
          </div>
          <Button type="submit" className="mt-4">Create</Button>
        </form>
      </CardContent>
    </Card>
  );
}`;
}).join('\n\n') %}
